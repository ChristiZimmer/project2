<div id="tournamentTable">
	<div class="panel panel-success">
		<div class="panel-heading">
			<h3 class="panel-title">List Tournaments</h3>
		</div>
		<div class="panel-body">
			<table class="table table-hover">
				<tr>
					<th>Id</th>
					<th>Name</th>
					<th>Coach</th>
					<th>Participants</th>
				</tr>
				<tr ng-repeat="t in allTournaments">
					<td>{{t.id}}</td>
					<td>{{t.name}}</td>
					<td>{{t.coach.name}}</td>
					<td><button type="button" class="btn btn-success" data-toggle="modal" data-target="#tournamenetParticipants">
						View Participants
					</button>
					</td>
				</tr>
			</table>
		</div>
	</div>
</div>
<div class="modal fade" id="tournamenetParticipants" tabindex="-1" role="dialog" aria-labelledby="tournamenetParticipantsTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tournamenetParticipantsTitle">Tournament Participants</h5>
      </div>
      <div class="modal-body">
        <p id="dataRow"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
	document.getElementById("tournamentTable").addEventListener("click", function(e) {
		if(event.target.className == "btn btn-success"){
			function getParticipants(){
				var xhr = new XMLHttpRequest();
				xhr.open("GET", "/home/tournament/getParticipants/" + event.target.parentNode.parentNode.childNodes[1].innerHTML, false);
				window.alert(event.target.parentNode.parentNode.childNodes[1].innerHTML);
				xhr.send();
				return xhr.response;
			}
			document.getElementById("dataRow").innerHTML = getParticipants();
		}
	}, false)
	function changeModal(){}
</script>